<img onclick="startDictation()" src="http://i.imgur.com/cHidSVu.gif" />

<div id="transcript">
  TEXT
</div>

<div id="textfield">
  TEXT
</div>


<!-- <body onload='responsiveVoice.speak("What type of Photo are you planning to take? Will it be indoors or outdoors? Will the subject be in motion or still?")'> -->

<body onload='responsiveVoice.speak("SPEAK?")'>


<script src='https://code.responsivevoice.org/responsivevoice.js'></script>


<!-- HTML5 Speech Recognition API -->

<script>
  var type = "";
  var locale = "indoors";
  var motion = "still";

  function startDictation() {

    console.log("type is:", type);
    if (window.hasOwnProperty('webkitSpeechRecognition')) {

      var recognition = new webkitSpeechRecognition();

      recognition.continuous = false;
      recognition.interimResults = false;

      recognition.lang = "en-US";
      recognition.start();

      recognition.onresult = function(e) {

        if (type == "") {
          if (e.results[0][0].confidence > 0.75) {
            if (e.results[0][0].transcript.includes("portrait")) {
              console.log("your text included portrait");
              type = "portrait";
            }
            if (e.results[0][0].transcript.includes("macro")) {
              console.log("your text included macro");
              type = "macro";
            }
            if (e.results[0][0].transcript.includes("landscape")) {
              console.log("your text included landscape");
              type = "landscape";
              locale = "outdoors";
            }
            if (e.results[0][0].transcript.includes("cityscape")) {
              console.log("your text included cityscape");
              type = "cityscape";
              locale = "outdoors";
            }
            if (e.results[0][0].transcript.includes("Outdoors")) {
              locale = "outdoors";
            }
            if (e.results[0][0].transcript.includes("motion")) {
              motion = "motion";
            }
          } else {
            responsiveVoice.speak("I did not catch that, please try again.");
          }
        }

        console.log(type);
        console.log(locale);
        console.log(motion);

        if (type != "") {
          // fire off our route here with query strings
          console.log("we are good to go!");
        } else {
          responsiveVoice.speak("Please let me know if you want to take a Portrait, Macro, Landscape or Cityscape Photo.");
        }

        console.log(e.results[0][0].transcript);
        console.log(typeof(e.results[0][0].transcript));
        document.getElementById('transcript').innerHTML
                                 = e.results[0][0].transcript;

        recognition.stop();

        document.getElementById('textfield').innerHTML
                                 = e.results[0][0].confidence;

      };

      recognition.onerror = function(e) {
        recognition.stop();
      };

    }
  }
</script>
